"use strict";(globalThis.webpackChunkgoose=globalThis.webpackChunkgoose||[]).push([[4062],{2076:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"tutorials/goose-in-docker","title":"goose in Docker","description":"Run goose inside Docker containers, or run extensions in existing containers for devcontainer workflows","source":"@site/docs/tutorials/goose-in-docker.md","sourceDirName":"tutorials","slug":"/tutorials/goose-in-docker","permalink":"/goose/docs/tutorials/goose-in-docker","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"goose in Docker","sidebar_label":"goose in Docker","description":"Run goose inside Docker containers, or run extensions in existing containers for devcontainer workflows"},"sidebar":"tutorialSidebar","previous":{"title":"Building Custom Extensions","permalink":"/goose/docs/tutorials/custom-extensions"},"next":{"title":"Using goose in Headless Mode for Automation","permalink":"/goose/docs/tutorials/headless-goose"}}');var i=o(74848),t=o(28453);const r={title:"goose in Docker",sidebar_label:"goose in Docker",description:"Run goose inside Docker containers, or run extensions in existing containers for devcontainer workflows"},c=void 0,a={},l=[{value:"Running goose Inside Docker",id:"running-goose-inside-docker",level:2},{value:"Running Extensions in Docker Containers",id:"running-extensions-in-docker-containers",level:2},{value:"Usage",id:"usage",level:3},{value:"Requirements",id:"requirements",level:3},{value:"Examples",id:"examples",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"This guide covers two Docker-related scenarios:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Running goose inside Docker"})," - Build and run the goose process itself in a container"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Running extensions in Docker"})," - Run goose on your host but execute extensions inside a container"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"running-goose-inside-docker",children:"Running goose Inside Docker"}),"\n",(0,i.jsx)(n.p,{children:"You can build goose from the source file within a Docker container. This approach not only provides security benefits by creating an isolated environment but also enhances consistency and portability. For example, if you need to troubleshoot an error on a platform you don't usually work with (such as Ubuntu), you can easily debug it using Docker."}),"\n",(0,i.jsxs)(n.p,{children:["To begin, you will need to modify the ",(0,i.jsxs)(n.a,{href:"https://github.com/block/goose/tree/main/documentation/docs/docker",children:[(0,i.jsx)(n.code,{children:"Dockerfile"})," and ",(0,i.jsx)(n.code,{children:"docker-compose.yml"})," files"]})," to suit your requirements. Some changes you might consider include:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Required:"})," Setting your API key, provider, and model in the ",(0,i.jsx)(n.code,{children:"docker-compose.yml"})," file as environment variables because the keyring settings do not work on Ubuntu in Docker. This example uses Google Gemini."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Optional:"})," Changing the base image to a different Linux distribution in the ",(0,i.jsx)(n.code,{children:"Dockerfile"}),". This example uses Ubuntu, but you can switch to another distribution such as CentOS, Fedora, or Alpine."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Optional:"})," Mounting your personal goose settings and hints files in the ",(0,i.jsx)(n.code,{children:"docker-compose.yml"})," file. This allows you to use your personal settings and hints files within the Docker container."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{title:"Automated Alternative",type:"tip",children:(0,i.jsxs)(n.p,{children:["For an automated approach to running goose in containers, see the ",(0,i.jsx)(n.a,{href:"/docs/mcp/container-use-mcp",children:"Container-Use MCP extension"}),", which creates and manages containers for you through conversation."]})}),"\n",(0,i.jsx)(n.p,{children:"After setting the credentials, you can build the Docker image using the following command:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker-compose -f documentation/docs/docker/docker-compose.yml build\n"})}),"\n",(0,i.jsx)(n.p,{children:"Next, run the container and connect to it using the following command:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker-compose -f documentation/docs/docker/docker-compose.yml run --rm goose-cli\n"})}),"\n",(0,i.jsx)(n.p,{children:"Inside the container, run the following command to configure goose:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"goose configure\n"})}),"\n",(0,i.jsxs)(n.p,{children:["When prompted to save the API key to the keyring, select ",(0,i.jsx)(n.code,{children:"No"}),", as you are already passing the API key as an environment variable."]}),"\n",(0,i.jsxs)(n.p,{children:["Configure goose a second time, and this time, you can ",(0,i.jsx)(n.a,{href:"/docs/getting-started/using-extensions",children:"add any extensions"})," you need."]}),"\n",(0,i.jsx)(n.p,{children:"After that, you can start a session:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"goose session\n"})}),"\n",(0,i.jsx)(n.p,{children:"You should now be able to connect to goose with your configured extensions enabled."}),"\n",(0,i.jsx)(n.h2,{id:"running-extensions-in-docker-containers",children:"Running Extensions in Docker Containers"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"--container"})," flag allows you to run goose extensions inside your Docker containers."]}),"\n",(0,i.jsx)(n.h3,{id:"usage",children:"Usage"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"goose session --container <container-id-or-name>\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Extensions configured in your ",(0,i.jsx)(n.code,{children:"config.yaml"})," will automatically run inside the specified container. Find your container ID or name with ",(0,i.jsx)(n.code,{children:"docker ps"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"requirements",children:"Requirements"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Extensions must exist in the container and be accessible via the same paths used in your extension config"}),"\n",(0,i.jsxs)(n.li,{children:["To run built-in extensions, the goose CLI must be ",(0,i.jsx)(n.a,{href:"/docs/getting-started/installation",children:"installed"})," inside the container"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"examples",children:"Examples"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Start an interactive session with extensions from config.yaml\ngoose session --container my-dev-container\n\n# Start a non-interactive session with instructions\ngoose run --container my-dev-container --text "your instructions here"\n\n# Specify an extension to run in the container\ngoose session --container 4c76a1beed85 --with-extension "uvx mcp-server-fetch"\n\n# Workaround: Use full path if container can\'t find the command\ngoose session --container 4c76a1beed85 --with-extension "/root/.local/bin/uvx mcp-server-fetch"\n'})})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,n,o)=>{o.d(n,{R:()=>r,x:()=>c});var s=o(96540);const i={},t=s.createContext(i);function r(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);